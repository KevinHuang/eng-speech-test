<p>口語練習</p>
<mat-card class="q-container">
  <!-- 所有題號 -->
  <div class="number-box">
    <div
      class="number"
      *ngFor="let q of questions"
      [ngClass]="getCssClass(q)"
      (click)="showQ(q)"
    >
      <span>{{ q.index }}</span>
    </div>
  </div>

  <!-- 題目內容-->
  <div class="q-content-area">
    <div class="q-nav" (click)="prevQ()">
      <mat-icon class="left">keyboard_arrow_left</mat-icon>
    </div>

    <div class="q-content">
      <div>{{ currentQ.content }}</div>
    </div>

    <div class="q-nav" (click)="nextQ()">
      <mat-icon class="right">keyboard_arrow_right</mat-icon>
    </div>
  </div>

  <!-- 答案區域 -->
  <div class="q-answer-area">
    <!-- <div class="q-nav"></div> -->

    <div class="q-answer-block">
      <div class="q-controls">
        <div class="mic" *ngIf="!(service.started$ | async)">
          <mat-icon (click)="listen()">mic</mat-icon>
        </div>

        <div class="pauseRec" *ngIf="service.started$ | async">
          <mat-icon class="stopRec" (click)="stopRecording()"
            >pause_circle_outline</mat-icon
          >
        </div>
      </div>
      <div class="q-answer">{{ message }}</div>
    </div>

    <!-- <div class="q-nav ans"></div> -->
  </div>
</mat-card>





<div class="qContainer">
  <!-- 題目內容 -->
  <div class="qContent">
    {{ currentQ.content }}

    <!-- 開始錄音按鈕 -->
    <div class="mic" *ngIf="currentQ.ans_status == 1 && !isRecording">
      <mat-icon (click)="startRecording()">mic</mat-icon>
    </div>

    <!-- 暫停按鈕 -->
    <mat-icon
      class="stopRec"
      *ngIf="
        (currentQ.ans_status === 1 && isRecording) || currentQ.ans_status === 3
      "
      (click)="stopRecording()"
      >pause_circle_outline</mat-icon
    >

    <!-- 下一題，當答對時才出現 -->
    <div class="mic" *ngIf="currentQ.ans_status === 2" (click)="nextQ()">
      <mat-icon>navigate_next</mat-icon>
    </div>
  </div>
  <!-- 答案內容 -->
  <div class="qAnswer">
    <span>{{ message }}</span>
    <mat-icon *ngIf="answerStatus === 2">check_circle_outline</mat-icon>
    <mat-icon *ngIf="answerStatus === 3">highlight_off</mat-icon>
  </div>
</div>

<p>RxCompoent.message: {{ message }}</p>
<button [disabled]="service.started$ | async" (click)="listen()">listen</button>
<p>lang: en</p>
<p>grammars: none</p>
